# C ノードネットワーク

これはCで実装されたシンプルなノードネットワークで、複数のノードがそれぞれのノードIDを使って互いに通信することができます。異なるコンピュータ間でも通信が可能です。

## 特徴

- 最大10個のノードを作成し、それぞれに一意のIDを割り当て
- 各ノードは独自のスレッドで実行
- ノードは受信者のIDを使用して他のノードにメッセージを送信可能
- メッセージには送信者ID、受信者ID、メッセージデータが含まれる
- すべてのノードはメッシュネットワークで相互に接続
- 異なるネットワーク上のコンピュータ間で通信可能

## 実装の詳細

- 通信にUDPソケットを使用
- 各ノードは異なるポート（BASE_PORT + node_id）でリッスン
- メッセージは一つのノードから別のノードに直接送信
- スレッドを使用して非同期でメッセージを受信
- ピア情報（ID、IPアドレス、ポート）を管理して異なるネットワーク上のノードと通信

## ビルドと実行方法

プロジェクトをビルドするには：

```bash
make
```

ネットワークを実行するには：

```bash
./node_network [オプション]
```

オプション：
- `-n COUNT` - 作成するノードの数（デフォルト：10）
- `-h` - ヘルプメッセージを表示

プログラムは以下を行います：
1. 指定された数のノードを作成
2. すべてのノードを相互に接続
3. 各ノードが他のすべてのノードにメッセージを送信するデモを実行
4. 中断（Ctrl+C）されるまで実行を継続

## 異なるコンピュータ間での通信

異なるコンピュータ間で通信するには、以下の手順に従います：

1. 各コンピュータでプログラムをビルド
2. 最初のコンピュータでノードを起動：`./node_network -n 5`
3. 2台目のコンピュータでノードを起動：`./node_network -n 5`
4. コードを修正して、各ノードに他のコンピュータのノード情報を追加：

```c
// 他のコンピュータのノードを追加する例
add_peer(nodes[0], 5, "192.168.1.100", BASE_PORT + 5);
```

## コード構造

- `node.h` - データ構造と関数宣言を含むヘッダーファイル
- `node.c` - ノード関数（作成、破棄、接続、送信、受信）の実装
- `main.c` - ネットワークをセットアップしメッセージングをデモするメインプログラム
- `Makefile` - ビルド設定

## プロジェクトの拡張

この基本的な実装は以下のようにさまざまな方法で拡張できます：
- より複雑なネットワークトポロジのためのルーティング機能の追加
- 信頼性メカニズム（確認応答、再送信）の実装
- 安全な通信のための暗号化の追加
- ノード発見と動的ネットワーク構成の実装
- アプリケーション固有のメッセージタイプとハンドラの追加
- 設定ファイルからのノード情報の読み込み